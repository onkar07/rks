{"ast":null,"code":"var _jsxFileName = \"/Users/onkarsarang/Documents/reactWork/rks/rks/src/components/feeEntry.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport { db } from '../config/firebase'; // import './creditDebit.css'\n\nimport { getDocs, collection, addDoc, onSnapshot } from 'firebase/firestore';\nimport { query, orderBy, limit, getDocuments } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction FeeEntry() {\n  _s();\n\n  var currentTimeInSeconds = Math.floor(Date.now() / 1000);\n  const [month, setMonth] = useState(\"January\");\n  var monthly_fee = 1100;\n  var monthArray = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  var recArray = [];\n  var dictt = [];\n  var records = {\n    student_id: \"\",\n    fee_amount: 0,\n    fee_month: \"\",\n    fee_date: currentTimeInSeconds\n  };\n  var studentId = useRef();\n  var amount = useRef();\n\n  const handleSubmit = async () => {\n    records.student_id = studentId.current.value;\n    records.fee_amount = amount.current.value;\n    records.fee_month = month;\n    console.log(records);\n\n    try {\n      const snap = await getDocs(collection(db, 'student_fees'));\n      snap.forEach(doc => {\n        var data = (doc.id, \" => \", doc.data());\n        recArray.push(data);\n      });\n      let cn = true;\n\n      for (let i = 0; i < recArray.length; i++) {\n        if (recArray[i].student_Id == records.student_id, recArray[i].fee_month == records.fee_month) {\n          if (window.confirm(\"Press a button!\")) {\n            console.log(\"Accepted\");\n          } else {\n            console.log(\"Declined\");\n          }\n\n          return cn = false;\n        }\n      }\n\n      if (cn == true) {\n        if (records.fee_amount > 1100) {\n          let reminder = Number(records.fee_amount) % 1100;\n          let Doloop = Math.floor(Number(records.fee_amount) / 1100);\n          let month_count;\n          console.log(Doloop);\n\n          for (let i = 0; i < 12; i++) {\n            if (records.fee_month == monthArray[i]) {\n              month_count = i;\n            }\n          }\n\n          for (let i = 0; i < Doloop; i++) {\n            try {\n              const docRef = await addDoc(collection(db, 'student_fees'), {\n                student_Id: records.student_id,\n                fee_amount: 1100,\n                fee_month: monthArray[i + 1 + month_count],\n                fee_date: records.fee_date\n              });\n              if (docRef) alert(\"Saved\");\n            } catch (err) {\n              console.log(err);\n              alert(\"Falied\");\n            }\n          }\n\n          if (reminder > 0) {\n            try {\n              const docRef = await addDoc(collection(db, 'student_fees'), {\n                student_Id: records.student_id,\n                fee_amount: reminder,\n                fee_month: records.fee_month,\n                fee_date: records.fee_date\n              });\n              if (docRef) alert(\"Saved\");\n            } catch (err) {\n              console.log(err);\n              alert(\"Falied\");\n            }\n          } // while(Doloop < 1){\n          //     Doloop = Doloop/1100;\n          // }\n\n\n          console.log(reminder);\n        }\n\n        console.log(\"saved\");\n      }\n    } catch (err) {\n      console.log(err);\n    } // try {\n    //     const docRef = await addDoc(collection(db, 'student_fees'), {\n    //       student_Id: records.student_id,\n    //       fee_amount: Number(records.fee_amount),\n    //       fee_month: records.fee_month,\n    //       fee_date: records.fee_date\n    //     })\n    //     if(docRef) alert(\"Saved\")\n    //   }\n    //   catch (err) {\n    //     console.log(err)\n    //     alert(\"Falied\")\n    //   }\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"debitCredit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput1\",\n          children: \"\\u0935\\u093F\\u0926\\u094D\\u092F\\u093E\\u0930\\u094D\\u0925\\u0940 \\u0928\\u0902\\u092C\\u0930 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: studentId,\n          name: \"subject\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput1\",\n          placeholder: \"\\u0935\\u093F\\u0937\\u092F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput1\",\n          children: \"\\u0930\\u0915\\u094D\\u0915\\u092E \\u20B9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: amount,\n          name: \"amount\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput1\",\n          placeholder: \"\\u0930\\u0915\\u094D\\u0915\\u092E \\u20B9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlSelect1\",\n          children: \"\\u092B\\u0940 \\u091A\\u093E \\u092E\\u0939\\u093F\\u0928\\u093E \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          class: \"form-control\",\n          value: month,\n          onChange: e => {\n            setMonth(e.target.value);\n          },\n          id: \"exampleFormControlSelect1\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"January\",\n            children: \"\\u091C\\u0928\\u0935\\u0930\\u0940 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"February\",\n            children: \"\\u092B\\u0930\\u0935\\u0930\\u0940 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"March\",\n            children: \"\\u092E\\u093E\\u0930\\u094D\\u091A \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"April\",\n            children: \"\\u0905\\u092A\\u094D\\u0930\\u0948\\u0932 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"May\",\n            children: \"\\u092E\\u0908 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"June\",\n            children: \"\\u091C\\u0942\\u0928 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"July\",\n            children: \"\\u091C\\u0941\\u0932\\u093E\\u0908 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"August\",\n            children: \"\\u0905\\u0917\\u0938\\u094D\\u0924 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"September\",\n            children: \"\\u0938\\u093F\\u0924\\u0902\\u092C\\u0930 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"October\",\n            children: \"\\u0905\\u0915\\u094D\\u091F\\u0942\\u092C\\u0930 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"November\",\n            children: \"\\u0928\\u0935\\u0902\\u092C\\u0930 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"month\",\n            value: \"December\",\n            children: \"\\u0926\\u093F\\u0938\\u0902\\u092C\\u0930 \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"footer\",\n        class: \"btn btn-primary\",\n        onClick: e => {\n          e.preventDefault();\n          handleSubmit();\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n}\n\n_s(FeeEntry, \"Sz8GoTP4Bg2ArMjtxdq/dXlVox4=\");\n\n_c = FeeEntry;\nexport default FeeEntry;\n\nvar _c;\n\n$RefreshReg$(_c, \"FeeEntry\");","map":{"version":3,"sources":["/Users/onkarsarang/Documents/reactWork/rks/rks/src/components/feeEntry.js"],"names":["React","useRef","useState","db","getDocs","collection","addDoc","onSnapshot","query","orderBy","limit","getDocuments","FeeEntry","currentTimeInSeconds","Math","floor","Date","now","month","setMonth","monthly_fee","monthArray","recArray","dictt","records","student_id","fee_amount","fee_month","fee_date","studentId","amount","handleSubmit","current","value","console","log","snap","forEach","doc","data","id","push","cn","i","length","student_Id","window","confirm","reminder","Number","Doloop","month_count","docRef","alert","err","e","target","preventDefault"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\nimport { db } from '../config/firebase';\n// import './creditDebit.css'\nimport { getDocs, collection, addDoc, onSnapshot } from 'firebase/firestore'\nimport { query, orderBy, limit, getDocuments } from \"firebase/firestore\";\nfunction FeeEntry() {\n    var currentTimeInSeconds = Math.floor(Date.now() / 1000);\n    const [month, setMonth] = useState(\"January\")\n    var monthly_fee = 1100;\n    var monthArray = [\"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\"]\n    var recArray = [];\n    var dictt = [];\n    var records = {\n        student_id : \"\",\n        fee_amount : 0,\n        fee_month : \"\",\n        fee_date : currentTimeInSeconds\n    }\n    \n    \n    var studentId = useRef();\n    var amount = useRef();\n\n    const handleSubmit = async () =>{\n        records.student_id = studentId.current.value;\n        records.fee_amount = amount.current.value;\n        records.fee_month = month;\n        console.log(records)\n        try {\n            const snap = await getDocs(collection(db, 'student_fees'));\n            snap.forEach((doc) => {\n              var data = (doc.id, \" => \", doc.data())\n              recArray.push(data);\n            });\n            let cn = true;\n            for(let i=0; i<recArray.length; i++){\n                if(recArray[i].student_Id == records.student_id, recArray[i].fee_month == records.fee_month){\n                    if (window.confirm(\"Press a button!\")) {\n                        console.log(\"Accepted\")\n                      } else {\n                        console.log(\"Declined\")\n                      }\n                    return cn=false;\n                }\n                \n            }\n            if( cn == true){\n                if(records.fee_amount > 1100){\n                    let reminder = Number(records.fee_amount) % 1100;\n                    let Doloop = Math.floor(Number(records.fee_amount) / 1100);\n                    let month_count;\n                    console.log(Doloop)\n                    for(let i=0; i<12; i++){\n                        if(records.fee_month == monthArray[i]){\n                            month_count = i;\n                        }\n                    }\n                    for(let i=0; i<Doloop; i++){\n                        try {\n                            const docRef = await addDoc(collection(db, 'student_fees'), {\n                                student_Id: records.student_id,\n                                fee_amount: 1100,\n                                fee_month: monthArray[i + 1 + month_count],\n                                fee_date: records.fee_date\n                            })\n                            if (docRef) alert(\"Saved\")\n                        }\n                        catch (err) {\n                            console.log(err)\n                            alert(\"Falied\")\n                        }\n                    }\n                    if(reminder > 0){\n                        try {\n                            const docRef = await addDoc(collection(db, 'student_fees'), {\n                                student_Id: records.student_id,\n                                fee_amount: reminder,\n                                fee_month: records.fee_month,\n                                fee_date: records.fee_date\n                            })\n                            if (docRef) alert(\"Saved\")\n                        }\n                        catch (err) {\n                            console.log(err)\n                            alert(\"Falied\")\n                        }\n                    }\n                    // while(Doloop < 1){\n                    //     Doloop = Doloop/1100;\n                        \n                    // }\n                    \n                    console.log(reminder)\n                }\n                \n        console.log(\"saved\")\n            }\n          }\n          catch (err) {\n            console.log(err)\n          }\n\n        // try {\n        //     const docRef = await addDoc(collection(db, 'student_fees'), {\n        //       student_Id: records.student_id,\n        //       fee_amount: Number(records.fee_amount),\n        //       fee_month: records.fee_month,\n        //       fee_date: records.fee_date\n        //     })\n        //     if(docRef) alert(\"Saved\")\n        //   }\n        //   catch (err) {\n        //     console.log(err)\n        //     alert(\"Falied\")\n        //   }\n    }\n\n    return (\n        <div>\n            <form id=\"debitCredit\">\n                <div class=\"form-group\">\n                    <label for=\"exampleFormControlInput1\">विद्यार्थी नंबर </label>\n                    <input type=\"text\" ref={studentId} name=\"subject\" class=\"form-control\" id=\"exampleFormControlInput1\" placeholder=\"विषय\" />\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"exampleFormControlInput1\">रक्कम ₹</label>\n                    <input type=\"number\" ref={amount} name=\"amount\" class=\"form-control\" id=\"exampleFormControlInput1\" placeholder=\"रक्कम ₹\" />\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"exampleFormControlSelect1\">फी चा महिना </label>\n                    <select class=\"form-control\" value={month} onChange={(e) => { setMonth(e.target.value) }} id=\"exampleFormControlSelect1\">\n                        <option name=\"month\" value=\"January\">जनवरी </option>\n                        <option name=\"month\" value=\"February\">फरवरी </option>\n                        <option name=\"month\" value=\"March\">मार्च </option>\n                        <option name=\"month\" value=\"April\">अप्रैल </option>\n                        <option name=\"month\" value=\"May\">मई </option>\n                        <option name=\"month\" value=\"June\">जून </option>\n                        <option name=\"month\" value=\"July\">जुलाई </option>\n                        <option name=\"month\" value=\"August\">अगस्त </option>\n                        <option name=\"month\" value=\"September\">सितंबर </option>\n                        <option name=\"month\" value=\"October\">अक्टूबर </option>\n                        <option name=\"month\" value=\"November\">नवंबर </option>\n                        <option name=\"month\" value=\"December\">दिसंबर </option>\n\n                    </select>\n                </div>\n                \n                \n                <button type=\"button\" id=\"footer\" class=\"btn btn-primary\" onClick={(e) => {\n                    e.preventDefault();\n                    handleSubmit();\n                }}>Submit</button>\n            </form>\n        </div>\n    )\n}\n\nexport default FeeEntry\n"]},"metadata":{},"sourceType":"module"}