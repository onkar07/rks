{"ast":null,"code":"var _jsxFileName = \"/Users/onkarsarang/Documents/reactWork/rks/rks/src/components/creditDebit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport { db } from '../config/firebase';\nimport './creditDebit.css';\nimport { getDocs, collection, addDoc, onSnapshot } from 'firebase/firestore';\nimport { query, orderBy, limit, getDocuments } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction CreditDebit() {\n  _s();\n\n  const [select, setSelect] = useState(\"debit\");\n  var currentTimeInSeconds = Math.floor(Date.now() / 1000);\n  const type = useRef();\n  const subject = useRef();\n  const amount = useRef();\n  var bal;\n  var comTime = [];\n  var recArray = [];\n  var lastRec = [];\n  var records = {\n    time: currentTimeInSeconds,\n    type: \"\",\n    subject: \"\",\n    amount: 0,\n    bal: 0\n  };\n\n  const lastOne = async () => {\n    try {\n      const snap = await getDocs(collection(db, 'debitCredit'));\n      snap.forEach(doc => {\n        var data = (doc.id, \" => \", doc.data());\n        recArray.push(data);\n      });\n      recArray.forEach(rec => {\n        comTime.push(rec.time);\n      });\n      comTime.sort();\n      var letest_time = comTime[comTime.length - 1];\n      recArray.forEach(rec => {\n        if (rec.time == letest_time) lastRec = rec;\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleSubmitEvent = async e => {\n    await lastOne();\n    console.log(lastRec);\n    records.type = select;\n    records.subject = subject.current.value;\n    records.amount = amount.current.value;\n\n    if (records.type == \"debit\") {\n      bal = lastRec.oldBal - Number(records.amount);\n    }\n\n    if (records.type == \"credit\") {\n      bal = lastRec.oldBal + Number(records.amount);\n    }\n\n    records.bal = bal;\n\n    try {\n      const docRef = await addDoc(collection(db, 'debitCredit'), {\n        Type: records.type,\n        subject: records.subject,\n        amount: Number(records.amount),\n        time: records.time,\n        oldBal: bal\n      });\n      alert(\"Saved\");\n    } catch (err) {\n      console.log(err);\n      alert(\"Falied\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"debitCredit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlSelect1\",\n          children: \"\\u091C\\u092E\\u093E \\u0916\\u0930\\u094D\\u091A \\u0939\\u094B\\u0936\\u094B\\u092C \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          class: \"form-control\",\n          value: select,\n          onChange: e => {\n            setSelect(e.target.value);\n          },\n          id: \"exampleFormControlSelect1\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"type\",\n            value: \"debit\",\n            children: \"\\u0916\\u0930\\u094D\\u091A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            name: \"type\",\n            value: \"credit\",\n            children: \"\\u091C\\u092E\\u093E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput1\",\n          children: \"\\u0935\\u093F\\u0937\\u092F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: subject,\n          name: \"subject\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput1\",\n          placeholder: \"\\u0935\\u093F\\u0937\\u092F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"exampleFormControlInput1\",\n          children: \"\\u0930\\u0915\\u094D\\u0915\\u092E \\u20B9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          ref: amount,\n          name: \"amount\",\n          class: \"form-control\",\n          id: \"exampleFormControlInput1\",\n          placeholder: \"\\u0930\\u0915\\u094D\\u0915\\u092E \\u20B9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"footer\",\n        class: \"btn btn-primary\",\n        onClick: e => {\n          e.preventDefault();\n          handleSubmitEvent();\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreditDebit, \"6rXsqjfQ2WFDNh48ZGRuvjhSs40=\");\n\n_c = CreditDebit;\nexport default CreditDebit;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreditDebit\");","map":{"version":3,"sources":["/Users/onkarsarang/Documents/reactWork/rks/rks/src/components/creditDebit.js"],"names":["React","useRef","useState","db","getDocs","collection","addDoc","onSnapshot","query","orderBy","limit","getDocuments","CreditDebit","select","setSelect","currentTimeInSeconds","Math","floor","Date","now","type","subject","amount","bal","comTime","recArray","lastRec","records","time","lastOne","snap","forEach","doc","data","id","push","rec","sort","letest_time","length","err","console","log","handleSubmitEvent","e","current","value","oldBal","Number","docRef","Type","alert","target","preventDefault"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\nimport { db } from '../config/firebase';\nimport './creditDebit.css'\nimport { getDocs, collection, addDoc, onSnapshot } from 'firebase/firestore'\nimport { query, orderBy, limit, getDocuments } from \"firebase/firestore\";\nfunction CreditDebit() {\n  const [select, setSelect] = useState(\"debit\")\n  var currentTimeInSeconds = Math.floor(Date.now() / 1000);\n  const type = useRef();\n  const subject = useRef();\n  const amount = useRef();\n  var bal;\n  var comTime = [];\n  var recArray = []\n  var lastRec = [];\n  var records = {\n    time: currentTimeInSeconds,\n    type: \"\",\n    subject: \"\",\n    amount: 0,\n    bal: 0\n  }\n  const lastOne = async () => {\n    try {\n      const snap = await getDocs(collection(db, 'debitCredit'));\n      snap.forEach((doc) => {\n        var data = (doc.id, \" => \", doc.data())\n        recArray.push(data);\n      });\n      recArray.forEach(rec => {\n        comTime.push(rec.time)\n      })\n      comTime.sort()\n      var letest_time = comTime[comTime.length - 1]\n\n      recArray.forEach(rec => {\n        if (rec.time == letest_time)\n          lastRec = rec\n      })\n    }\n    catch (err) {\n      console.log(err)\n    }\n  }\n\n  const handleSubmitEvent = async (e) => {\n    await lastOne()\n    console.log(lastRec)\n    records.type = select\n    records.subject = subject.current.value;\n    records.amount = amount.current.value;\n    if (records.type == \"debit\") {\n      bal = lastRec.oldBal - Number(records.amount);\n    }\n    if (records.type == \"credit\") {\n      bal = lastRec.oldBal + Number(records.amount);\n    }\n    records.bal = bal;\n\n    try {\n      const docRef = await addDoc(collection(db, 'debitCredit'), {\n        Type: records.type,\n        subject: records.subject,\n        amount: Number(records.amount),\n        time: records.time,\n        oldBal: bal\n      })\n      alert(\"Saved\")\n    }\n    catch (err) {\n      console.log(err)\n      alert(\"Falied\")\n    }\n  }\n\n\n  return (\n    <div>\n      <form id=\"debitCredit\">\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlSelect1\">जमा खर्च होशोब </label>\n          <select class=\"form-control\" value={select} onChange={(e) => { setSelect(e.target.value) }} id=\"exampleFormControlSelect1\">\n            <option name=\"type\" value=\"debit\">खर्च</option>\n            <option name=\"type\" value=\"credit\">जमा</option>\n          </select>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlInput1\">विषय</label>\n          <input type=\"text\" ref={subject} name=\"subject\" class=\"form-control\" id=\"exampleFormControlInput1\" placeholder=\"विषय\" />\n        </div>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlInput1\">रक्कम ₹</label>\n          <input type=\"number\" ref={amount} name=\"amount\" class=\"form-control\" id=\"exampleFormControlInput1\" placeholder=\"रक्कम ₹\" />\n        </div>\n        <button type=\"button\" id=\"footer\" class=\"btn btn-primary\" onClick={(e) => {\n          e.preventDefault();\n          handleSubmitEvent()\n        }}>Submit</button>\n      </form>\n    </div>\n  )\n}\n\nexport default CreditDebit\n"]},"metadata":{},"sourceType":"module"}